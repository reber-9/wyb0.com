<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>编码 on </title>
    <link>http://wyb0.com/tags/%E7%BC%96%E7%A0%81/</link>
    <description>Recent content in 编码 on </description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2016-2017 Reber. All Rights Reserved.</copyright>
    <lastBuildDate>Wed, 29 Jun 2016 15:14:11 +0800</lastBuildDate>
    <atom:link href="http://wyb0.com/tags/%E7%BC%96%E7%A0%81/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Python的编码问题</title>
      <link>http://wyb0.com/posts/Python%E7%BC%96%E7%A0%81/</link>
      <pubDate>Wed, 29 Jun 2016 15:14:11 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/Python%E7%BC%96%E7%A0%81/</guid>
      <description>

&lt;h2 id=&#34;几个编码函数:ad9892e057f87c48c3f81918723997bb&#34;&gt;几个编码函数&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;chr(x)
可以将0-255之间的数字转化为ASCII表中的字符&lt;/li&gt;
&lt;li&gt;ord(x)
可以ASCII表中的字符转化为0-255之间的数字&lt;/li&gt;
&lt;li&gt;hex(x)
将整数转化为十六进制字符串&lt;/li&gt;
&lt;li&gt;oct(x)
将整数转化为八进制字符串&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;在py文件开头:ad9892e057f87c48c3f81918723997bb&#34;&gt;在py文件开头&lt;/h2&gt;

&lt;p&gt;使用：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;#!/usr/bin/env python
#-*- coding: UTF-8 -*-
或：
#coding=utf8
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;永久编码-推荐:ad9892e057f87c48c3f81918723997bb&#34;&gt;永久编码(推荐)&lt;/h2&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/unicode_encode_error.png&#34; alt=&#34;python编码出错.png&#34;&gt;
&lt;/div&gt;

可以在python安装路径下的Lib\site-packages下新建文件sitecustomize.py文件，内容如下：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;#coding=utf8
import sys
reload(sys)
sys.setdefaultencoding(&#39;utf8&#39;)
# 此方法修改了python环境，设置系统默认编码，永久有效
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;编码转换:ad9892e057f87c48c3f81918723997bb&#34;&gt;编码转换&lt;/h2&gt;

&lt;p&gt;python默认unicode为中间编码，所以无论是何种编码，解码时默认都解码为unicode&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# coding: UTF-8

&amp;quot;&amp;quot;&amp;quot;从gbk编码的文件中读出数据，重新编码为utf8然后存储&amp;quot;&amp;quot;&amp;quot;

f = open(&#39;test.txt&#39;)  # gbk编码
s = f.read()

u = s.decode(&#39;gbk&#39;) # 将gbk解码为unicode
# 通常要判断其编码方式是否为unicode
# isinstance(s, unicode)可以用来判断是否为unicode 
# 这里已知是GBK编码，解码成unicode
s = u.encode(&#39;utf8&#39;)  # 将unicode编码为utf8

f.write(s)
f.close()
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;网页的编码:ad9892e057f87c48c3f81918723997bb&#34;&gt;网页的编码&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;#!/usr/bin/env python
#-*- coding:utf-8 -*-

import requests

resp = requests.get(&#39;http://soft.nyist.edu.cn/&#39;)
print resp.apparent_encoding #UTF-8-SIG
resp.encoding = resp.apparent_encoding #获取原网页的编码格式，并赋给resp.encoding
html = resp.text #以resp.encoding的格式解码为unicode
# print html.encode(&#39;gb18030&#39;) #转码为gbk不能正常输出html源码
print type(html) #&amp;lt;type &#39;unicode&#39;&amp;gt;
title = html.lower().split(&#39;&amp;lt;title&amp;gt;&#39;)[1].split(&#39;&amp;lt;/title&#39;)[0]
print title #南阳理工学院
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>